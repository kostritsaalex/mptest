(function(a){"use strict";a(document).ready(function(){hivepress.getComponent("calendar").each(function(){var b=new DateFormatter,c=a(this),d={height:"auto",timeZone:"UTC",locale:hivepressCoreData.language,editable:!1,selectable:!0,expandRows:!0,events:c.data("events"),unselectCancel:".fc-range-button",longPressDelay:500,initialView:"dayGridMonth",initialDate:c.data("min-date"),validRange:{start:c.data("min-date"),end:c.data("max-date")},select:function(d){c.data("start-date",b.formatDate(new Date(d.start.toLocaleString("en-US",{timeZone:"UTC"})),"Y-m-d H:i:s")),c.data("end-date",b.formatDate(new Date(d.end.toLocaleString("en-US",{timeZone:"UTC"})),"Y-m-d H:i:s")),a(".fc-range-button").css("display","inline-block")},unselect:function(){a(".fc-range-button").hide()},selectOverlap:function(a){return"background"===a.display},headerToolbar:{right:"block,unblock prev,next"},customButtons:{range:{icon:"hp-price",text:hivepressBookingsData.changePriceText,click:function(){if(c.data("start-date")&&c.data("end-date")){var b=a(c.data("range-url")).find("form");b.find("input[name=start_date]").val(c.data("start-date")),b.find("input[name=end_date]").val(c.data("end-date")),a.fancybox.close(),a.fancybox.open({src:c.data("range-url"),touch:!1})}}},block:{icon:"hp-lock",text:hivepressBookingsData.blockText,click:function(){c.data("start-date")&&c.data("end-date")&&(f.addEvent({groupId:"blocked",start:c.data("start-date"),end:c.data("end-date"),allDay:"month"===c.data("view"),display:"background",classNames:["fc-blocked"]}),a.ajax({url:c.data("block-url"),method:"POST",data:{start_date:c.data("start-date"),end_date:c.data("end-date")},beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)}}))}},unblock:{icon:"hp-unlock",text:hivepressBookingsData.unblockText,click:function(){c.data("start-date")&&c.data("end-date")&&(f.addEvent({groupId:"unblocked",start:c.data("start-date"),end:c.data("end-date"),allDay:"month"===c.data("view"),display:"background",classNames:["fc-unblocked"]}),a.ajax({url:c.data("unblock-url"),method:"POST",data:{start_date:c.data("start-date"),end_date:c.data("end-date")},beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)}}))}}}};if("week"===c.data("view")&&a.extend(d,{initialView:"timeGridWeek",allDaySlot:!1,displayEventTime:!1,slotMinTime:c.data("min-time"),slotMaxTime:c.data("max-time"),slotDuration:c.data("slot-duration")}),c.data("range-url")){var e=c.data("ranges");e&&e.length&&(d.dayCellContent=function(b){var c=Math.floor,d=c(b.date.getTime()/1e3),f=null;if(a.each(e,function(a,b){if(b.start<=d&&d<b.end)return f=b.price,!1}),f)return b.dayNumberText+" ("+f+")"}),d.headerToolbar.right="range "+d.headerToolbar.right}c.data("common")&&(d.headerToolbar.right="prev,next",d.eventDidMount=function(b){a(b.el).attr("title",b.event.extendedProps.description)});var f=new FullCalendar.Calendar(c.get(0),d);f.render()})})})(jQuery);